<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LinkedIn Banner - Enzo Ferracini Patti</title>
  <link
   href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap"
   rel="stylesheet"
  />
  <link
   href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
   rel="stylesheet"
  />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./assets/css/style.css" />
 </head>
 <body
  class="bg-[#0e1111] font-['Inter'] flex flex-col items-center min-h-screen"
  data-palette="darkGreen"
 >
  <button
   id="download-banner-puppeteer"
   class="no-export mt-8 mb-4 px-6 py-2 rounded-lg text-black font-semibold transition"
   style="z-index: 10"
  >
   Download Banner (Puppeteer)
  </button>

  <div class="color-selector flex items-center gap-1 mb-6">
   <span>Theme</span>
   <div class="flex gap-1">
    <button
     data-palette="darkGreen"
     class="color-option bg-green-600"
     title="Dark Green"
    ></button>
    <button
     data-palette="deepBlue"
     class="color-option bg-blue-500"
     title="Deep Blue"
    ></button>
    <button
     data-palette="vibrantPurple"
     class="color-option bg-purple-500"
     title="Vibrant Purple"
    ></button>
    <button
     data-palette="sunsetOrange"
     class="color-option bg-orange-500"
     title="Sunset Orange"
    ></button>
    <button
     data-palette="teal"
     class="color-option bg-teal-500"
     title="Teal"
    ></button>
   </div>
  </div>

  <div
   class="w-[1584px] h-[396px] bg-gray-900 shadow-xl flex p-12 relative"
   id="banner"
  >
   <div class="content-wrapper w-full flex justify-between">
    <div class="w-4/5 flex flex-col justify-center ml-[100px]">
     <div class="flex justify-start items-center space-x-4">
      <h1 class="text-4xl font-bold text-white mb-2">Enzo Ferracini Patti</h1>
      <div id="company-logo-wrapper">
       <img
        id="company-logo"
        src="./img/mottu.jpg"
        alt="Mottu logo"
        class="h-10 w-10 rounded-full bg-white shadow"
       />
      </div>
     </div>

     <p class="italic text-gray-300 mb-3 text-lg">
      Driven by curiosity and continuous learning
     </p>

     <div
      class="flex items-center flex-wrap gap-2 mb-4 w-[45rem] text-slate-200"
     >
      <span
       class="px-3 py-1 rounded-full border text-xs border-gray-700 bg-gray-900"
       >Intern at <span class="font-bold text-accent">Mottu</span></span
      >
      <span
       class="px-3 py-1 rounded-full border text-xs border-gray-700 bg-gray-900"
       >Web Developer</span
      >
      <span
       class="px-3 py-1 rounded-full border text-xs border-gray-700 bg-gray-900"
       >Computer Science Student</span
      >
      <span
       class="px-3 py-1 rounded-full border text-xs border-gray-700 bg-gray-900"
       >Systems Development Technician</span
      >
     </div>

     <div
      class="highlight-bg p-3 rounded-lg border-l-4 border-accent mb-4 w-[40.5rem] flex items-center gap-2 text-base"
     >
      <i class="bx bx-trophy align-middle mr-1 text-slate-200"></i>
      <span class="truncate whitespace-normal text-slate-200"
       >Recognized as the top graduate in Systems Development at SENAI</span
      >
      <span
       class="ml-2 px-2 py-0.5 rounded-full bg-secondary text-gray-300 text-xs font-bold"
       style="text-shadow: 1px 1px 2px rgb(0, 0, 0), 0 0 1px #fff"
       >2024</span
      >
     </div>

     <div class="flex flex-wrap gap-8 text-secondary text-base items-center">
      <span
       ><i class="bx bx-envelope align-middle mr-1 text-secondary"></i
       ><span class="text-slate-200">efpatti.dev@gmail.com</span></span
      >
      <span
       ><i class="bx bx-phone align-middle mr-1 text-secondary"></i
       ><span class="text-slate-200">+55 (11) 97883-3101</span></span
      >
      <span
       ><i class="bx bxl-github align-middle mr-1 text-secondary"></i
       ><span class="text-slate-200">github.com/efpatti</span></span
      >
     </div>
    </div>

    <div class="w-3/5 flex flex-col justify-start items-end">
     <pre
      id="code"
      class="bg-gray-900 p-6 shadow-accent rounded-lg text-sm font-['Fira_Code'] text-gray-50 mb-4 w-9/12 mx-auto"
     ></pre>
     <div class="w-9/12 flex justify-center mb-4 mx-auto">
      <div
       class="flex gap-4 text-secondary text-2xl items-center justify-center w-fit mx-auto"
       style="white-space: nowrap"
      >
       <i class="bx bxl-typescript h-6 w-6"></i>
       <i class="bx bxl-react h-6 w-6"></i>
       <i class="bx bxl-nodejs h-6 w-6"></i>
       <i class="bx bxl-java h-6 w-6"></i>
       <i class="bx bxl-tailwind-css h-6 w-6"></i>
       <i class="bx bxl-git h-6 w-6"></i>
       <i class="bx bxl-postgresql h-6 w-6"></i>
       <i class="bx bxs-terminal h-6 w-6"></i>
      </div>
     </div>
    </div>
   </div>
  </div>

  <!-- Campo de logo dinâmica -->
  <div class="mt-6 flex items-center gap-3 w-full max-w-2xl">
   <div class="search-container">
    <div class="relative flex-1">
     <input
      id="company-domain"
      type="text"
      placeholder=" "
      autocomplete="off"
      class="peer px-4 py-3 w-full bg-gray-800 border border-gray-700 rounded-lg text-gray-200 focus:border-accent focus:ring-0 transition-all duration-200"
     />
     <label
      for="company-domain"
      class="absolute left-3 top-3 px-1 text-gray-400 pointer-events-none transition-all duration-200 peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-focus:-top-2 peer-focus:text-xs peer-focus:text-accent bg-gray-800 peer-focus:bg-gray-900"
     >
      Digite o domínio (ex: google.com)
     </label>
     <div
      class="absolute inset-x-0 bottom-0 h-0.5 bg-accent scale-x-0 peer-focus:scale-x-100 transition-transform duration-300 origin-left"
     ></div>
    </div>
    <div id="suggestions" class="suggestions-container"></div>
   </div>

   <button id="update-logo" class="icon-expand-button rounded-lg">
    <i class="bx bxs-edit"></i>
   </button>
   <button id="remove-logo" class="icon-expand-button rounded-lg">
    <i class="bx bxs-trash"></i>
   </button>
  </div>
  <script>
   // Elementos DOM
   const input = document.getElementById("company-domain");
   const updateBtn = document.getElementById("update-logo");
   const removeBtn = document.getElementById("remove-logo");
   const logoEl = document.getElementById("company-logo");
   const suggestionsContainer = document.getElementById("suggestions");
   const TOKEN = "pk_fnCdcveMSlWxQcDxxOsXhQ";

   // Lista de empresas populares para sugestões
   const popularCompanies = [
    "google.com",
    "microsoft.com",
    "apple.com",
    "amazon.com",
    "facebook.com",
    "netflix.com",
    "twitter.com",
    "instagram.com",
    "linkedin.com",
    "youtube.com",
    "spotify.com",
    "airbnb.com",
    "uber.com",
    "dropbox.com",
    "slack.com",
    "github.com",
    "gitlab.com",
    "mottu.com.br",
   ];

   // Debounce para evitar muitas chamadas
   function debounce(func, wait) {
    let timeout;
    return function (...args) {
     clearTimeout(timeout);
     timeout = setTimeout(() => func.apply(this, args), wait);
    };
   }

   // Mostrar sugestões
   function showSuggestions(suggestions) {
    suggestionsContainer.innerHTML = "";

    if (suggestions.length === 0) {
     suggestionsContainer.style.display = "none";
     return;
    }

    suggestions.forEach((domain, index) => {
     const div = document.createElement("div");
     div.className = "suggestion-item";
     div.textContent = domain;
     div.addEventListener("click", () => {
      input.value = domain;
      suggestionsContainer.style.display = "none";
      updateLogo(domain);
     });
     suggestionsContainer.appendChild(div);
    });

    suggestionsContainer.style.display = "block";
   }

   // Atualizar logo
   function updateLogo(domain) {
    if (!domain || !domain.includes(".")) {
     return;
    }
    logoEl.src = `https://img.logo.dev/${domain}?token=${TOKEN}`;
    logoEl.alt = `Logo de ${domain}`;
   }

   // Buscar sugestões
   async function fetchSuggestions(query) {
    if (query.length < 2) {
     // Mostra empresas populares quando há poucos caracteres
     const filtered = popularCompanies.filter((company) =>
      company.includes(query.toLowerCase())
     );
     showSuggestions(filtered);
     return;
    }

    try {
     // Filtra na lista local (poderia ser substituído por chamada à API)
     const filtered = popularCompanies.filter((company) =>
      company.includes(query.toLowerCase())
     );

     showSuggestions(filtered);
    } catch (error) {
     console.error("Error fetching suggestions:", error);
     showSuggestions([]);
    }
   }

   // Event listeners
   input.addEventListener(
    "input",
    debounce(() => {
     const query = input.value.trim().toLowerCase();
     fetchSuggestions(query);
    }, 300)
   );

   input.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
     updateLogo(input.value.trim());
     suggestionsContainer.style.display = "none";
    }
   });

   document.addEventListener("click", (e) => {
    if (!input.contains(e.target) && !suggestionsContainer.contains(e.target)) {
     suggestionsContainer.style.display = "none";
    }
   });

   updateBtn.addEventListener("click", () => {
    const domain = input.value.trim().toLowerCase();
    if (!domain || !domain.includes(".")) {
     alert("Digite um domínio válido, ex: google.com");
     return;
    }
    updateLogo(domain);
    suggestionsContainer.style.display = "none";
   });

   removeBtn.addEventListener("click", () => {
    logoEl.src = "./img/mottu.jpg";
    logoEl.alt = "Logo da Mottu";
    input.value = "";
    suggestionsContainer.style.display = "none";
   });

   // Navegação por teclado nas sugestões
   let highlightedIndex = -1;

   input.addEventListener("keydown", (e) => {
    const items = suggestionsContainer.querySelectorAll(".suggestion-item");

    if (e.key === "ArrowDown") {
     e.preventDefault();
     highlightedIndex = (highlightedIndex + 1) % items.length;
     updateHighlight();
    } else if (e.key === "ArrowUp") {
     e.preventDefault();
     highlightedIndex = (highlightedIndex - 1 + items.length) % items.length;
     updateHighlight();
    } else if (e.key === "Enter" && highlightedIndex >= 0) {
     e.preventDefault();
     items[highlightedIndex].click();
    }

    function updateHighlight() {
     items.forEach((item, index) => {
      item.classList.toggle("highlighted", index === highlightedIndex);
      if (index === highlightedIndex) {
       item.scrollIntoView({ block: "nearest" });
      }
     });
    }
   });

   // Inicialização do tema
   document.addEventListener("DOMContentLoaded", () => {
    // Seu código de inicialização de tema aqui
   });
  </script>

  <script type="module" src="./assets/js/app.js"></script>
  <script src="./assets/js/puppeteerDownload.js"></script>
 </body>
</html>
